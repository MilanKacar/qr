<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rear Camera QR Code Scanner</title>

    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(to bottom, #add8e6, #87cefa); /* Light blue gradient background */
        }

        #reader {
            width: 300px;
            height: 300px;
            background-color: #fff;
            border: 2px solid #333;
            border-radius: 10px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Placeholder element for the QR code scanner -->
    <div id="reader"></div>

    <script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {

            let config = {
              fps: 10,
              qrbox: {width: 100, height: 100},
              rememberLastUsedCamera: true,
              // Only support camera scan type.
              supportedScanTypes: [Html5QrcodeScanType.SCAN_TYPE_CAMERA]
            };
            const qrCodeReader = new Html5Qrcode("reader", config);

            qrCodeReader.start(
                config,
                (message) => {
                    // Handle the scanned QR code message
                    alert(`Scanned QR Code: ${message}`);
                },
                (error) => {
                    // Handle errors during QR code scanning
                    console.error(`QR Code scanning error: ${error}`);
                }
            );

            // Stop the scanner when the user leaves the page
            window.addEventListener('beforeunload', () => {
                qrCodeReader.stop().then(() => {
                    console.log('QR Code scanner stopped.');
                }).catch((error) => {
                    console.error('Error stopping QR Code scanner:', error);
                });
            });
        });
    </script>
</body>
</html>
