<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Scanner</title>

    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(to bottom, #add8e6, #87cefa); /* Light blue gradient background */
        }

        #reader {
            width: 300px;
            height: 300px;
            background-color: #fff;
            border: 2px solid #333;
            border-radius: 10px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Placeholder element for the QR code scanner -->
    <div id="reader"></div>

    <!-- File input for scanning QR codes from images -->
    <input type="file" id="qr-input-file" accept="image/*">

    <script src="https://raw.githubusercontent.com/mebjas/html5-qrcode/master/minified/html5-qrcode.min.js"></script>
    <script>
        // Initialize html5-qrcode
        const html5QrCode = new Html5Qrcode("reader");

        // File based scanning
        const fileInput = document.getElementById('qr-input-file');
        fileInput.addEventListener('change', e => {
            if (e.target.files.length == 0) {
                // No file selected, ignore 
                return;
            }

            // Use the first item in the list
            const imageFile = e.target.files[0];
            html5QrCode.scanFile(imageFile, true)
            .then(qrCodeMessage => {
                // success, use qrCodeMessage
                console.log(qrCodeMessage);
                alert(`Scanned Content: ${qrCodeMessage}`);
            })
            .catch(err => {
                // failure, handle it.
                console.error(`Error scanning file. Reason: ${err}`);
                alert(`Error scanning file. Reason: ${err}`);
            });
        });

        // Start live scanning
        html5QrCode.start(
            { fps: 10 },
            {
                qrbox: 250,
            },
            qrCodeMessage => {
                // Success callback for live scanning
                console.log(`Live Scanned Content: ${qrCodeMessage}`);
                alert(`Live Scanned Content: ${qrCodeMessage}`);
            },
            errorMessage => {
                // Error callback for live scanning
                console.error(`Live Scanning Error: ${errorMessage}`);
                alert(`Live Scanning Error: ${errorMessage}`);
            }
        );
    </script>
</body>
</html>
